<h2>Finaliser la réservation</h2>

<!-- Affichage des erreurs -->
<% if @booking.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@booking.errors.count, "erreur") %> trouvée(s) :</h2>
    <ul>
      <% @booking.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<!-- Formulaire pour finaliser la réservation -->
<%= form_with(model: [@room, @booking]) do |f| %>
  <div class="conteneur-de-réservation-finale">
    <h3>Finaliser la réservation</h3>

    <!-- Récapitulatif des détails de la réservation -->
    <p>Date de début : <%= @booking.start_date.present? ? @booking.start_date.strftime("%d/%m/%Y") : 'Non spécifiée' %></p>
    <p>Date de fin : <%= @booking.end_date.present? ? @booking.end_date.strftime("%d/%m/%Y") : 'Non spécifiée' %></p>
    <p>Durée : <%= @booking.duration %></p>
    <p>Nombre de participants : <%= @booking.number_of_guests %></p>

    <!-- Informations du client -->
    <h4>Informations du client</h4>

    <div class="form-group">
      <%= f.label :first_name, 'Prénom' %>
      <%= f.text_field :first_name, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :last_name, 'Nom' %>
      <%= f.text_field :last_name, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :email, 'Adresse Email' %>
      <%= f.email_field :email, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :phone, 'Numéro de téléphone' %>
      <%= f.telephone_field :phone, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :address, 'Adresse' %>
      <%= f.text_field :address, class: 'form-control' %>
    </div>

    <!-- Boutons pour continuer vers le paiement ou demander un devis -->
    <div class="form-group">
      <%= f.submit 'Continuer vers le paiement', class: 'btn btn-primary', name: 'continue' %>
      <%= f.submit 'Demander un devis', class: 'btn btn-secondary', name: 'quote' %>
    </div>
  </div>
<% end %>

<!-- Bouton pour annuler et retourner au calendrier -->
<%= link_to 'Annuler', availability_room_path(@room), class: 'btn btn-danger' %>
<%= link_to 'Revenir au calendrier', availability_room_path(@room), class: 'btn btn-secondary' %>
