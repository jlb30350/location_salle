<h1>Finalisation de la réservation</h1>

<div id="reservation-section" data-room-id="<%= @room.id %>">
  <!-- Contenu de la section de réservation -->
</div>

<!-- Affichage des erreurs -->
<% if @booking.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@booking.errors.count, "erreur") %> ont empêché la création de la réservation :</h2>
    <ul>
      <% @booking.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<!-- Formulaire de réservation avec form_with pour une meilleure intégration Rails -->
<%= form_with(model: [@room, @booking], local: true) do |form| %>
  <div class="form-group">
    <%= form.label :first_name, "Prénom" %>
    <%= form.text_field :first_name, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :last_name, "Nom" %>
    <%= form.text_field :last_name, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :email, "Adresse e-mail" %>
    <%= form.email_field :email, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :phone, "Téléphone" %>
    <%= form.telephone_field :phone, class: 'form-control', placeholder: "Entrez un numéro de téléphone valide (10 chiffres)" %>
  </div>

  <div class="form-group">
    <%= form.label :start_date, "Date de début" %>
    <%= form.date_select :start_date, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :end_date, "Date de fin" %>
    <%= form.date_select :end_date, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :address, 'Adresse' %>
    <%= form.text_field :address, class: 'form-control' %>
  </div>

  <!-- Boutons de finalisation -->
  <div class="form-group">
    <%= form.submit "Payer maintenant", name: "continue", class: "btn btn-primary" %>
    <%= form.submit "Demander un devis", name: "quote", class: "btn btn-secondary" %>
    <%= link_to 'Retour', room_path(@room), class: 'btn btn-secondary' %>
  </div>
<% end %>
