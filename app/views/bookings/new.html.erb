<!-- app/views/bookings/new.html.erb -->
<h1>Finalisation de la réservation</h1>

<%= form_with model: @booking, url: room_bookings_path(@room), method: :post, local: true do |form| %>
  <!-- Champs pour les informations utilisateur -->
  <div class="form-group">
    <%= form.label :first_name, "Prénom" %>
    <%= form.text_field :first_name, class: "form-control", required: true %>
    <% if @booking.errors[:first_name].any? %>
      <div class="alert alert-danger"><%= @booking.errors[:first_name].first %></div>
    <% end %>
  </div>

  <div class="form-group">
    <%= form.label :last_name, "Nom" %>
    <%= form.text_field :last_name, class: "form-control", required: true %>
    <% if @booking.errors[:last_name].any? %>
      <div class="alert alert-danger"><%= @booking.errors[:last_name].first %></div>
    <% end %>
  </div>

  <!-- Champs pour d'autres informations utilisateur (email, téléphone, etc.) -->
  <div class="form-group">
    <%= form.label :email, "Adresse e-mail" %>
    <%= form.email_field :email, class: "form-control", required: true %>
    <% if @booking.errors[:email].any? %>
      <div class="alert alert-danger"><%= @booking.errors[:email].first %></div>
    <% end %>
  </div>

  <div class="form-group">
    <%= form.label :phone, "Téléphone" %>
    <%= form.text_field :phone, class: "form-control", required: true %>
    <% if @booking.errors[:phone].any? %>
      <div class="alert alert-danger"><%= @booking.errors[:phone].first %></div>
    <% end %>
  </div>

  <div class="form-group">
    <%= form.hidden_field :start_date, value: @booking.start_date || params[:start_date] %>
    <%= form.hidden_field :end_date, value: @booking.end_date || params[:end_date] %>
    <%= form.hidden_field :start_time, value: @booking.start_time || "07:00" %>
    <%= form.hidden_field :end_time, value: @booking.end_time || "17:00" %>
  </div>

  <div class="form-group">
    <%= form.submit "Réserver", class: "btn btn-primary" %>
   
  <%= link_to 'Retour', room_path(@room), class: 'btn btn-secondary' %>
  </div>
<% end %>
