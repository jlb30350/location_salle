<!-- app/views/bookings/quote.pdf.erb -->

<h1>Devis pour la réservation de la salle <%= @booking.room.name %></h1>

<p><strong>Client :</strong> <%= @booking.first_name %> <%= @booking.last_name %></p>
<p><strong>Email :</strong> <%= @booking.email %></p>
<p><strong>Téléphone :</strong> <%= @booking.phone %></p>
<p><strong>Date de début :</strong> <%= @booking.start_date.strftime('%d/%m/%Y') %></p>
<p><strong>Date de fin :</strong> <%= @booking.end_date.strftime('%d/%m/%Y') %></p>

<h2>Détails du devis :</h2>
<table>
  <thead>
    <tr>
      <th>Description</th>
      <th>Montant</th>
    </tr>
  </thead>
  <tbody>
    <% if @booking.room.hourly_rate && @booking.calculated_duration == :hour %>
      <tr>
        <td>Location à l'heure</td>
        <td><%= number_to_currency(@booking.room.hourly_rate) %></td>
      </tr>
    <% elsif @booking.room.daily_rate && @booking.calculated_duration == :day %>
      <tr>
        <td>Location à la journée</td>
        <td><%= number_to_currency(@booking.room.daily_rate) %></td>
      </tr>
    <% elsif @booking.room.multiple_days_rate && @booking.calculated_duration == :multiple_days %>
      <tr>
        <td>Location de plusieurs jours</td>
        <td><%= number_to_currency(@booking.room.multiple_days_rate * (@booking.end_date - @booking.start_date + 1).to_i) %></td>
      </tr>
    <% elsif @booking.room.weekend_rate && @booking.calculated_duration == :weekend %>
      <tr>
        <td>Location pour le week-end</td>
        <td><%= number_to_currency(@booking.room.weekend_rate) %></td>
      </tr>
    <% elsif @booking.room.weekly_rate && @booking.calculated_duration == :week %>
      <tr>
        <td>Location à la semaine</td>
        <td><%= number_to_currency(@booking.room.weekly_rate) %></td>
      </tr>
    <% elsif @booking.room.monthly_rate && @booking.calculated_duration == :month %>
      <tr>
        <td>Location au mois</td>
        <td><%= number_to_currency(@booking.room.monthly_rate) %></td>
      </tr>
    <% elsif @booking.room.quarterly_rate && @booking.calculated_duration == :quarter %>
      <tr>
        <td>Location trimestrielle</td>
        <td><%= number_to_currency(@booking.room.quarterly_rate) %></td>
      </tr>
    <% elsif @booking.room.semiannual_rate && @booking.calculated_duration == :semiannual %>
      <tr>
        <td>Location semestrielle</td>
        <td><%= number_to_currency(@booking.room.semiannual_rate) %></td>
      </tr>
    <% elsif @booking.room.annual_rate && @booking.calculated_duration == :year %>
      <tr>
        <td>Location à l'année</td>
        <td><%= number_to_currency(@booking.room.annual_rate) %></td>
      </tr>
    <% end %>

    <tr>
      <td><strong>Total TTC</strong></td>
      <td><%= number_to_currency(@booking.total_amount) %></td>
    </tr>
  </tbody>
</table>

<p><strong>Veuillez procéder au paiement pour confirmer votre réservation.</strong></p>

<button onclick="window.print()" class="btn btn-secondary">Imprimer le devis</button>
