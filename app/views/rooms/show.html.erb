<div class="room-details-section">
  <h2>Calendrier des réservations</h2>
  <% if @room %>
    <!-- Affichage du calendrier -->
    <div class="calendar-container">
      <%= generate_calendar(@year, @month) do |date| %>
        <div class="day <%= 'reserved' if @bookings.any? { |booking| booking.start_date <= date && booking.end_date >= date } %>">
          <% bookings_on_date = @bookings.select { |booking| booking.start_date <= date && booking.end_date >= date } %>
          <% if bookings_on_date.any? %>
            <% bookings_on_date.each do |booking| %>
              <span class="reserved"><%= booking.user.name %></span>
            <% end %>
          <% else %>
            <%= link_to 'Disponible', new_room_booking_path(@room, start_date: date), class: 'available' %>
          <% end %>
        </div>
      <% end %>
    </div>

    <!-- Détails de la salle -->
    <div class="room-info">
      <h1><%= @room.name %></h1>
      <p><strong>Adresse :</strong> <%= @room.city %>, <%= @room.department %></p>
      <p><strong>Capacité :</strong> <%= @room.capacity %> personnes</p>
    </div>

    <!-- Bouton pour inciter à devenir bailleur -->
    <%= link_to 'Cliquez ici pour mettre en ligne une salle', new_room_path, class: 'btn btn-success my-3' %>

    <!-- Bouton de réservation -->
    <%= link_to 'Réserver cette salle', new_room_booking_path(@room), class: 'btn btn-primary my-3' %>

    <!-- Tarification -->
    <h3>Tarifs</h3>
    <ul>
      <% if @room.hourly_rate.present? %>
        <li><strong>Tarif horaire :</strong> <%= number_to_currency(@room.hourly_rate, unit: "€") %></li>
      <% end %>
      <% if @room.daily_rate.present? %>
        <li><strong>Tarif journalier :</strong> <%= number_to_currency(@room.daily_rate, unit: "€") %></li>
      <% end %>
    </ul>

  <% else %>
    <p>Cette salle n'existe pas ou a été supprimée.</p>
  <% end %>
</div>
