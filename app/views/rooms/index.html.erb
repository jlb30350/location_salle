<!-- app/views/pages/home.html.erb -->
<h1>Bienvenue sur notre site de location de salles et trouvez la salle parfaite pour votre événement
que ce soit pour un mariage, une conférence ou une réunion, nous avons la salle qu'il vous faut.</h1>
<h2>Vous êtes propriétaire d'une salle, Inscrivez vous et mettez votre bien en ligne ou bien si vous êtes client devenez bailleur en cliquant sur le bouton "Devenir bailleur".</h2>
<p>Rejoignez notre plateforme et commencez à louer votre espace dès aujourd'hui !</p>
<ul>
  <li>Augmentez vos revenus</li>
  <li>Gérez facilement vos réservations</li>
  <li>Profitez de notre large base de clients</li>
</ul>

<section class="search-section">
  <h2>Recherchez une salle par département ou ville</h2>
 <%= form_with url: search_rooms_path, method: :get, local: true do |f| %>
    <div class="form-group">
      <%= f.label :query, "Entrez un code postal à 5 chiffres ou un nom de ville" %>
      <%= f.text_field :query, value: params[:query], class: "form-control", placeholder: "Ex: 75001 ou Paris" %>
    </div>
    <%= f.submit "Rechercher votre future salle à louer", class: "btn btn-primary" %>
  <% end %>
</section>

<section class="featured-rooms">
  <h2>Salles en vedette</h2>
  <div class="room-grid">
    <% if @featured_rooms.present? %>
      <% @featured_rooms.each do |room| %>
        <%= render 'rooms/room_card', room: room %>
      <% end %>
    <% else %>
      <p>Aucune salle en vedette pour le moment.</p>
    <% end %>
  </div>
</section>
<!-- app/views/rooms/index.html.erb -->
<h1>Toutes les salles</h1>

<% if @rooms.any? %>
  <div class="row">
    <% @rooms.each do |room| %>
    <div class="col-md-4">
      <div class="card mb-4 shadow-sm">
            <% if room.photos.attached? %>
        <%= link_to url_for(room.photos.first), data: { lightbox: "rooms", title: room.name } do %>
          <%= image_tag room.photos.first.variant(resize_to_limit: [100, 100]), class: "card-img-top" %>
        <% end %>
        <% else %>
          <%= image_tag 'default_image.png', class: "card-img-top", alt: "Default Image" %>
        <% end %>
        <div class="card-body">
          <h5 class="card-title"><%= room.name %></h5>
          <p class="card-text"><%= room.description.truncate(80) %></p>
          <div class="d-flex justify-content-between align-items-center">
            <div class="btn-group">
              <%= link_to 'Voir les détails', room_path(room), class: "btn btn-sm btn-outline-secondary" %>
            </div>
            <small class="text-muted"><%= room.price %> €</small>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
<% else %>
  <p>Aucune salle n'a été trouvée.</p>
<% end %>

<section class="for-owners">
  <h2>Vous êtes propriétaire d'une salle ?</h2>
  <p>Rejoignez notre plateforme et commencez à louer votre espace dès aujourd'hui !</p>
  <ul>
    <li>Augmentez vos revenus</li>
    <li>Gérez facilement vos réservations</li>
    <li>Profitez de notre large base de clients</li>
  </ul>
</section>

<section class="testimonials">
  <h2>Ce que disent nos clients</h2>
  <div class="testimonial-carousel">
    <% Testimonial.order(created_at: :desc).limit(3).each do |testimonial| %>
      <div class="testimonial">
        <p><%= testimonial.content %></p>
        <%= testimonial.author %>
      </div>
    <% end %>
  </div>
</section>